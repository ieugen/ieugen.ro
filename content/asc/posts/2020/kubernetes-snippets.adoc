{:title "Usefull kubernetes snippets"
 :layout :post
 :date   "2020-05-10"
 :tags  ["kubernetes" "sysadmin" "snippets"]
 :toc false
 :lang "en"
}

:toc: macro

== Test cluster using a service / ingress


[source,shell]
--
    kubectl --namespace default create deployment echoserver --image k8s.gcr.io/echoserver:1.3
    kubectl --namespace default expose deployment echoserver --port=8080

    kubectl --namespace default create ingress echoserver\
    --annotation kubernetes.io/ingress.class=haproxy\
    --rule="echoserver.local/*=echoserver:8080"
--



    kubectl --namespace prod create deployment echoserver --image k8s.gcr.io/echoserver:1.3
    kubectl --namespace prod expose deployment echoserver --port=8080

    kubectl --namespace prod create ingress echoserver\
    --annotation kubernetes.io/ingress.class=haproxy\
    --rule="echoserver.local/*=echoserver:8080"
